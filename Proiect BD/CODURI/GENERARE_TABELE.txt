-- Generated by Oracle SQL Developer Data Modeler 20.3.0.283.0710
--   at:        2021-01-06 17:34:10 EET
--   site:      Oracle Database 12c
--   type:      Oracle Database 12c



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE detalii_jucatori (
    cnp            VARCHAR2(13) NOT NULL,
    id_jucator     NUMBER(20) NOT NULL,
    data_nasterii  DATE NOT NULL,
    tara           VARCHAR2(20) NOT NULL,
    telefon        VARCHAR2(10),
    email          VARCHAR2(20)
);

ALTER TABLE detalii_jucatori ADD CHECK ( length(cnp) = 13 );

ALTER TABLE detalii_jucatori ADD CHECK ( length(tara) > 0 );

ALTER TABLE detalii_jucatori ADD CHECK ( length(telefon) = 10 );

ALTER TABLE detalii_jucatori ADD CHECK ( REGEXP_LIKE ( email,
                                                       '[a-z0-9._%-]+@[a-z0-9._%-]+\.[a-z]{2,4}' ) );

CREATE UNIQUE INDEX detalii_jucatori__idx ON
    detalii_jucatori (
        id_jucator
    ASC );

ALTER TABLE detalii_jucatori ADD CONSTRAINT detalii_jucatori_pk PRIMARY KEY ( cnp );

CREATE TABLE echipe (
    id_echipa    NUMBER(20) NOT NULL,
    nume_echipa  VARCHAR2(20) NOT NULL,
    buget        NUMBER(5) NOT NULL,
    nr_jucatori  NUMBER(15) NOT NULL,
    locatia      VARCHAR2(20)
);

ALTER TABLE echipe ADD CHECK ( length(nume_echipa) > 0 );

ALTER TABLE echipe ADD CHECK ( buget BETWEEN 0 AND 100 );

ALTER TABLE echipe ADD CHECK ( nr_jucatori >= 5 );

ALTER TABLE echipe ADD CHECK ( length(locatia) > 0 );

ALTER TABLE echipe ADD CONSTRAINT echipe_pk PRIMARY KEY ( id_echipa );

ALTER TABLE echipe ADD CONSTRAINT key_2 UNIQUE ( nume_echipa );

CREATE TABLE istorie (
    id_istorie    NUMBER(30) NOT NULL,
    id_jucator    NUMBER(20) NOT NULL,
    id_echipa     NUMBER(20) NOT NULL,
    nr_meciuri    NUMBER(6) NOT NULL,
    id_pozitie    NUMBER(10) NOT NULL,
    data_inceput  DATE NOT NULL,
    data_final    DATE NOT NULL
);

ALTER TABLE istorie ADD CHECK ( nr_meciuri >= 0 );

ALTER TABLE istorie
    ADD CONSTRAINT istorie_pk PRIMARY KEY ( id_istorie,
                                            data_inceput,
                                            data_final );

CREATE TABLE jucatori (
    id_jucator  NUMBER(20) NOT NULL,
    id_echipa   NUMBER(20) NOT NULL,
    nume        VARCHAR2(30) NOT NULL,
    prenume     VARCHAR2(30) NOT NULL,
    salariu     NUMBER(5) NOT NULL,
    status      NUMBER NOT NULL
);

ALTER TABLE jucatori ADD CHECK ( length(nume) > 0 );

ALTER TABLE jucatori ADD CHECK ( length(prenume) > 1 );

ALTER TABLE jucatori ADD CHECK ( salariu > 0 );

ALTER TABLE jucatori ADD CONSTRAINT jucatori_pk PRIMARY KEY ( id_jucator );

ALTER TABLE jucatori ADD CONSTRAINT jucatori_id_echipa_pk UNIQUE ( id_jucator );

CREATE TABLE pozitii (
    id_pozitie  NUMBER(10) NOT NULL,
    pozitie     VARCHAR2(20) NOT NULL
);

ALTER TABLE pozitii
    ADD CHECK ( pozitie IN ( 'aruncator', 'conducator joc', 'extrema', 'pivot', 'pivot mic' ) );

ALTER TABLE pozitii ADD CONSTRAINT pozitii_pk_uk PRIMARY KEY ( id_pozitie );

ALTER TABLE pozitii ADD CONSTRAINT key_2v1 UNIQUE ( pozitie );

ALTER TABLE jucatori
    ADD CONSTRAINT echip_juci_fk FOREIGN KEY ( id_echipa )
        REFERENCES echipe ( id_echipa );

ALTER TABLE detalii_jucatori
    ADD CONSTRAINT juc_det_fk FOREIGN KEY ( id_jucator )
        REFERENCES jucatori ( id_jucator );

ALTER TABLE istorie
    ADD CONSTRAINT juc_ist_fk FOREIGN KEY ( id_jucator )
        REFERENCES jucatori ( id_jucator );

ALTER TABLE istorie
    ADD CONSTRAINT juc_poz_fk FOREIGN KEY ( id_pozitie )
        REFERENCES pozitii ( id_pozitie );

ALTER TABLE istorie
    ADD CONSTRAINT relation_15 FOREIGN KEY ( id_echipa )
        REFERENCES echipe ( id_echipa );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                             5
-- CREATE INDEX                             1
-- ALTER TABLE                             26
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- TSDP POLICY                              0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
